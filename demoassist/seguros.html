<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Información Cliente - Seguro</title>
    <!-- Google Fonts for modern typography -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet" />
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background: #f5f7fa;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            color: #333;
        }
        header {
            background-color: #00457c;
            width: 100%;
            padding: 15px 20px;
            display: flex;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        header img {
            height: 50px;
            margin-right: 15px;
        }
        header h1 {
            color: #fff;
            font-weight: 700;
            font-size: 1.5rem;
            margin: 0;
        }
        main {
            background: #fff;
            margin: 40px 20px;
            padding: 30px 40px;
            border-radius: 10px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
            max-width: 600px;
            width: 100%;
            text-align: center;
            position: relative;
        }
        .loading-spinner {
            border: 5px solid #f3f3f3;
            border-top: 5px solid #00457c;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
            display: none;
        }
        @keyframes spin {
            0% { transform: rotate(0deg);}
            100% { transform: rotate(360deg);}
        }
        .info-item {
            margin: 12px 0;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        .info-item svg {
            fill: #00457c;
            width: 24px;
            height: 24px;
        }
        #no-data {
            color: #cc0000;
            font-weight: 600;
            margin-top: 20px;
        }
        #greeting {
            margin-bottom: 20px;
            font-size: 1.2rem;
            color: #00457c;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <header>
        <img src="logoatlas.png" alt="Logo de la Aseguradora" />
        <h1>Información de Póliza del Cliente</h1>
    </header>
    <main>
        <div id="greeting"></div>
        <div id="loading" class="loading-spinner" aria-label="Cargando información"></div>
        <div id="client-info"></div>
        <div id="no-data"></div>
    </main>

    <script>
        // Datos simulados del cliente para demostración (reemplazar con una llamada a API real)
        const clients = {
            "525544491355": {
                nombre: "Veronica Diaz",
                correo: "vdiazrod@cisco.com",
                numeroPoliza: "INS-2025-001234",
                tipoPoliza: "Seguro de Auto",
                fechaInicio: "2025-01-15",
                fechaFin: "2026-01-14",
                montoPrima: "MXN 12,500.00",
                cobertura: "Responsabilidad Civil, Daños Materiales, Robo Total",
                beneficiarios: "N/A"
            },
            "525551743175": {
                nombre: "Juan Perez",
                correo: "jperez@example.com",
                numeroPoliza: "INS-2025-005678",
                tipoPoliza: "Seguro de Hogar",
                fechaInicio: "2025-03-01",
                fechaFin: "2026-02-28",
                montoPrima: "MXN 8,000.00",
                cobertura: "Daños por Incendio, Robo con Violencia, Responsabilidad Civil Familiar",
                beneficiarios: "Familia Perez"
            }
            // Agrega más clientes según sea necesario
        };

        const clientInfoDiv = document.getElementById('client-info');
        const loadingSpinner = document.getElementById('loading');
        const noDataDiv = document.getElementById('no-data');
        const greetingDiv = document.getElementById('greeting');

        // Íconos SVG para los datos de seguro (Material Design Icons)
        const icons = {
            nombre: `<svg viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>`, // account_circle
            correo: `<svg viewBox="0 0 24 24"><path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/></svg>`, // email
            numeroPoliza: `<svg viewBox="0 0 24 24"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1s-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm7 16H5V5h14v14z"/></svg>`, // assignment
            tipoPoliza: `<svg viewBox="0 0 24 24"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.7-7 8.94V12H5V5.82l7-3.11v8.28z"/></svg>`, // security
            fechaInicio: `<svg viewBox="0 0 24 24"><path d="M19 4h-1V2h-2v2H8V2H6v2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"/></svg>`, // date_range
            fechaFin: `<svg viewBox="0 0 24 24"><path d="M19 4h-1V2h-2v2H8V2H6v2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"/></svg>`, // date_range
            montoPrima: `<svg viewBox="0 0 24 24"><path d="M19 14V6c0-1.1-.9-2-2-2H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zm-2 0H3V6h14v8zm-7-7c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3zm10 0v11c0 1.1-.9 2-2 2H4v-2h15V7h-2z"/></svg>`, // payments
            cobertura: `<svg viewBox="0 0 24 24"><path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"/></svg>`, // list
            beneficiarios: `<svg viewBox="0 0 24 24"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-4 0c1.66 0 2.99-1.34 2.99-3S13.66 5 12 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm-4 0c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg>` // groups
        };

        function getURLParameter(name) {
            const params = new URLSearchParams(window.location.search);
            return params.get(name) || null;
        }

        function displayGreeting(agentName, queue) {
            if (agentName && queue) {
                greetingDiv.textContent = `Hola agente ${agentName}. Esta llamada llegó a la cola: ${queue}`;
            } else if (agentName) {
                greetingDiv.textContent = `Hola, ${agentName}.`;
            } else {
                greetingDiv.textContent = '';
            }
        }

        function displayClientInfo(client) {
            clientInfoDiv.innerHTML = `
                <div class="info-item">${icons.nombre}<strong>Nombre:</strong> ${client.nombre}</div>
                <div class="info-item">${icons.correo}<strong>Correo Electrónico:</strong> ${client.correo}</div>
                <div class="info-item">${icons.numeroPoliza}<strong>Número de Póliza:</strong> ${client.numeroPoliza}</div>
                <div class="info-item">${icons.tipoPoliza}<strong>Tipo de Póliza:</strong> ${client.tipoPoliza}</div>
                <div class="info-item">${icons.fechaInicio}<strong>Fecha de Inicio:</strong> ${client.fechaInicio}</div>
                <div class="info-item">${icons.fechaFin}<strong>Fecha de Fin:</strong> ${client.fechaFin}</div>
                <div class="info-item">${icons.montoPrima}<strong>Monto de la Prima:</strong> ${client.montoPrima}</div>
                <div class="info-item">${icons.cobertura}<strong>Cobertura:</strong> ${client.cobertura}</div>
                <div class="info-item">${icons.beneficiarios}<strong>Beneficiarios:</strong> ${client.beneficiarios}</div>
            `;
            noDataDiv.textContent = '';
        }

        async function fetchClientData(phone) {
            loadingSpinner.style.display = 'block';
            clientInfoDiv.innerHTML = '';
            noDataDiv.textContent = '';

            return new Promise((resolve) => {
                setTimeout(() => {
                    loadingSpinner.style.display = 'none';
                    resolve(clients[phone] || null);
                }, 1200); // Simula un retraso de red
            });
        }

        async function init() {
            const agentName = getURLParameter('agentname');
            const queue = getURLParameter('queue');
            displayGreeting(agentName, queue);

            let phoneRaw = getURLParameter('telefono') || getURLParameter('phone') || getURLParameter('numero');
            if (!phoneRaw) {
                noDataDiv.textContent = 'No se proporcionó número telefónico en la URL.';
                return;
            }
            // Eliminar el '+' inicial si está presente
            const phone = phoneRaw.replace(/^\+/, '');

            const client = await fetchClientData(phone);
            if (client) {
                displayClientInfo(client);
            } else {
                noDataDiv.textContent = `No se encontró información para el número: ${phone}`;
            }
        }

        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>