<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Banco Futuro - Búsqueda de Clientes</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <!-- Font Awesome para los iconos -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    /* Reutilizar los estilos proporcionados */
    :root {
      --primary-blue: #0056b3; /* Azul más oscuro y formal para banca */
      --secondary-green: #28a745; /* Verde para acentos */
      --light-gray: #f8f9fa; /* Fondo claro */
      --dark-text: #343a40; /* Texto oscuro */
      --border-radius-lg: 12px;
      --border-radius-sm: 8px;
      --shadow-light: 0 4px 15px rgba(0, 0, 0, 0.08);
      --shadow-medium: 0 6px 20px rgba(0, 0, 0, 0.12);
      --shadow-deep: 0 8px 25px rgba(0, 0, 0, 0.15);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Inter', sans-serif;
      background-color: var(--light-gray);
      color: var(--dark-text);
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    /* Header */
    header {
      background-color: #ffffff;
      padding: 1rem 2.5rem;
      display: flex;
      justify-content: flex-start;
      align-items: center;
      box-shadow: var(--shadow-light);
      position: sticky;
      top: 0;
      z-index: 1000;
      gap: 1rem;
    }

    header .logo {
      height: 45px;
      display: flex;
      align-items: center;
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--primary-blue);
      text-decoration: none;
    }

    header .logo img {
      height: 40px;
      margin-right: 10px;
      border-radius: var(--border-radius-sm);
    }

    /* Nuevos estilos para la Página de Búsqueda de Clientes */
    .customer-search-section {
      padding: 3rem 2.5rem;
      max-width: 900px;
      margin: 2rem auto;
      background-color: white;
      border-radius: var(--border-radius-lg);
      box-shadow: var(--shadow-medium);
      text-align: center;
    }

    .customer-search-section h1 {
      font-size: 2.5rem;
      color: var(--primary-blue);
      margin-bottom: 1.5rem;
      font-weight: 700;
    }

    .search-form {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
      align-items: center;
      margin-bottom: 2rem;
    }

    .search-form label {
      font-size: 1.1rem;
      font-weight: 500;
      color: var(--dark-text);
    }

    .search-form input[type="text"] {
      width: 100%;
      max-width: 400px;
      padding: 0.8rem 1rem;
      border: 1px solid #ced4da;
      border-radius: var(--border-radius-sm);
      font-size: 1rem;
      color: var(--dark-text);
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
    }

    .search-form input[type="text"]:focus {
      border-color: var(--primary-blue);
      box-shadow: 0 0 0 0.2rem rgba(0, 86, 179, 0.25);
      outline: none;
    }

    .search-form button {
      background-color: var(--secondary-green); /* Usar el verde para el botón de búsqueda */
      color: white;
      padding: 0.9rem 2.5rem;
      border: none;
      border-radius: var(--border-radius-sm);
      font-weight: 600;
      font-size: 1.1rem;
      cursor: pointer;
      transition: background-color 0.3s ease, transform 0.2s ease;
      box-shadow: 0 4px 10px rgba(40, 167, 69, 0.3);
    }

    .search-form button:hover {
      background-color: #218838; /* Verde más oscuro al pasar el ratón */
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(40, 167, 69, 0.4);
    }

    .customer-results {
      text-align: left;
      margin-top: 2rem;
      padding-top: 2rem;
      border-top: 1px solid #e9ecef;
      display: none; /* Ocultar por defecto, se mostrará con JS */
    }

    .customer-results.show {
        display: block;
    }

    .customer-results h2 {
      font-size: 1.8rem;
      color: var(--primary-blue);
      margin-bottom: 1rem;
    }

    .customer-info p {
      font-size: 1.1rem;
      margin-bottom: 0.5rem;
      color: #555;
    }

    .customer-info strong {
      color: var(--dark-text);
    }

    .cards-and-credits {
      display: grid;
      grid-template-columns: 1fr;
      gap: 2rem;
      margin-top: 1.5rem;
    }

    .cards-section, .credits-section {
      background-color: var(--light-gray);
      padding: 1.5rem;
      border-radius: var(--border-radius-sm);
      box-shadow: var(--shadow-light);
    }

    .cards-section h3, .credits-section h3 {
      font-size: 1.5rem;
      color: var(--primary-blue);
      margin-bottom: 1rem;
      border-bottom: 2px solid var(--primary-blue);
      padding-bottom: 0.5rem;
    }

    .card-item, .credit-item {
      background-color: #ffffff;
      padding: 1rem;
      border-radius: var(--border-radius-sm);
      margin-bottom: 1rem;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }

    .card-item:last-child, .credit-item:last-child {
      margin-bottom: 0;
    }

    .card-item p, .credit-item p {
      margin-bottom: 0.3rem;
      font-size: 0.95rem;
    }

    .card-item p strong, .credit-item p strong {
      color: var(--dark-text);
    }

    /* Mensajes de no datos */
    .no-data-placeholder {
        font-style: italic;
        color: #777;
        text-align: center;
        padding: 1rem 0;
    }

    /* Ajustes Responsivos para la nueva sección */
    @media (max-width: 992px) {
      .customer-search-section {
        padding: 2.5rem 2rem;
        margin: 1.5rem auto;
      }
      .customer-search-section h1 {
        font-size: 2.2rem;
      }
    }

    @media (max-width: 768px) {
      header {
        flex-direction: column;
        align-items: flex-start;
        padding: 1rem;
      }
      .customer-search-section {
        padding: 2rem 1.5rem;
        margin: 1rem auto;
      }
      .customer-search-section h1 {
        font-size: 2rem;
      }
      .search-form {
        flex-direction: column;
        gap: 1rem;
      }
      .search-form input[type="text"] {
        max-width: 100%;
      }
      .cards-and-credits {
        grid-template-columns: 1fr;
      }
      .cards-section, .credits-section {
        padding: 1rem;
      }
      .cards-section h3, .credits-section h3 {
        font-size: 1.3rem;
      }
    }

    @media (max-width: 480px) {
      header .logo {
        font-size: 1.5rem;
      }
      header .logo img {
        height: 35px;
      }
      .customer-search-section {
        padding: 1.5rem 1rem;
      }
      .customer-search-section h1 {
        font-size: 1.8rem;
      }
      .search-form button {
        padding: 0.7rem 1.8rem;
        font-size: 1rem;
      }
      .customer-results h2 {
        font-size: 1.6rem;
      }
      .cards-section h3, .credits-section h3 {
        font-size: 1.2rem;
      }
    }

    /* Footer */
    footer {
      background-color: var(--dark-text);
      color: white;
      text-align: center;
      padding: 2rem;
      margin-top: 2rem;
      font-size: 0.9rem;
    }
  </style>
</head>
<body>

<header>
  <a href="#" class="logo">
    <img src="logo.png" alt="Logo Banco Futuro">
    Banco Futuro
  </a>
</header>

<main>
  <section class="customer-search-section">
    <h1>Búsqueda de Clientes</h1>
    <form class="search-form" onsubmit="event.preventDefault(); displayCustomerResults();">
      <label for="customerSearchInput">Introduce ID de Cliente (Ej: C01, C02):</label>
      <input type="text" id="customerSearchInput" placeholder="Ej: C01">
      <button type="submit">Buscar Cliente</button>
    </form>

    <div class="customer-results" id="customerResults">
      <h2>Información del Cliente: <span id="customerName"></span></h2>
      <div class="customer-info">
        <p><strong>ID de Cliente:</strong> <span id="customerDisplayID"></span></p>
        <p><strong>Email:</strong> <span id="customerEmail"></span></p>
        <p><strong>Teléfono:</strong> <span id="customerPhone"></span></p>
        <p><strong>Código Postal:</strong> <span id="customerZip"></span></p>
      </div>

      <div class="cards-and-credits">
        <div class="cards-section">
          <h3>Tarjetas de Crédito</h3>
          <div id="creditCardsList">
            <!-- Las tarjetas se cargarán aquí dinámicamente -->
            <p class="no-data-placeholder">Realiza una búsqueda para ver las tarjetas.</p>
          </div>
        </div>

        <div class="credits-section">
          <h3>Créditos Contratados</h3>
          <div id="creditsList">
            <!-- Los créditos se cargarán aquí dinámicamente -->
            <p class="no-data-placeholder">Realiza una búsqueda para ver los créditos.</p>
          </div>
        </div>
      </div>
    </div>
  </section>
</main>

<footer>
  &copy; 2025 Banco Futuro. Todos los derechos reservados. | Aviso de Privacidad | Términos y Condiciones
</footer>

<!-- Script para la funcionalidad de búsqueda de clientes -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const API_URL_CUSTOMER_DETAILS = 'https://6892811ec49d24bce867aefa.mockapi.io/clientes';
    const API_URL_BANK_PRODUCTS = 'https://67f48026cbef97f40d2e5fbd.mockapi.io/customerBanco';

    const customerResultsDiv = document.getElementById('customerResults');
    const customerNameSpan = document.getElementById('customerName');
    const customerDisplayIDSpan = document.getElementById('customerDisplayID');
    const customerEmailSpan = document.getElementById('customerEmail');
    const customerPhoneSpan = document.getElementById('customerPhone');
    const customerZipSpan = document.getElementById('customerZip');
    const creditCardsList = document.getElementById('creditCardsList');
    const creditsList = document.getElementById('creditsList');

    // Formateador para pesos mexicanos
    const mxnFormatter = new Intl.NumberFormat('es-MX', {
      style: 'currency',
      currency: 'MXN',
      minimumFractionDigits: 2,
      maximumFractionDigits: 2,
    });

    // Función auxiliar para formatear valores monetarios
    function formatCurrency(value) {
      // Intenta convertir el valor a número. Si no es un número (ej. '*****'), devuelve el valor original.
      const numValue = parseFloat(value);
      return isNaN(numValue) ? value : mxnFormatter.format(numValue);
    }

    window.displayCustomerResults = async function() {
      const searchTerm = document.getElementById('customerSearchInput').value.trim();

      // Limpiar y ocultar resultados anteriores
      customerNameSpan.textContent = '';
      customerDisplayIDSpan.textContent = '';
      customerEmailSpan.textContent = '';
      customerPhoneSpan.textContent = '';
      customerZipSpan.textContent = '';
      creditCardsList.innerHTML = '<p class="no-data-placeholder">Realiza una búsqueda para ver las tarjetas.</p>';
      creditsList.innerHTML = '<p class="no-data-placeholder">Realiza una búsqueda para ver los créditos.</p>';
      customerResultsDiv.classList.remove('show');

      if (!searchTerm) {
        alert('Por favor, introduce un ID de cliente para buscar.');
        return;
      }

      try {
        // 1. Buscar detalles del cliente
        const customerDetailsResponse = await fetch(API_URL_CUSTOMER_DETAILS);
        if (!customerDetailsResponse.ok) {
          throw new Error(`Error HTTP al obtener detalles del cliente: ${customerDetailsResponse.status}`);
        }
        const customerDetailsData = await customerDetailsResponse.json();
        const foundCustomerDetails = customerDetailsData.find(customer => customer.customerID.toLowerCase() === searchTerm.toLowerCase());

        if (!foundCustomerDetails) {
          alert(`Cliente con ID "${searchTerm}" no encontrado en la base de datos de clientes.`);
          return;
        }

        // Rellenar información básica del cliente
        customerNameSpan.textContent = foundCustomerDetails.name;
        customerDisplayIDSpan.textContent = foundCustomerDetails.customerID;
        customerEmailSpan.textContent = foundCustomerDetails.email;
        customerPhoneSpan.textContent = foundCustomerDetails.number;
        customerZipSpan.textContent = foundCustomerDetails.zip;

        // 2. Buscar productos bancarios del cliente
        const bankProductsResponse = await fetch(API_URL_BANK_PRODUCTS);
        if (!bankProductsResponse.ok) {
          throw new Error(`Error HTTP al obtener productos bancarios: ${bankProductsResponse.status}`);
        }
        const bankProductsData = await bankProductsResponse.json();
        const foundBankProducts = bankProductsData.find(product => product.customerID.toLowerCase() === searchTerm.toLowerCase());

        // Limpiar placeholders antes de añadir datos
        creditCardsList.innerHTML = '';
        creditsList.innerHTML = '';

        if (foundBankProducts) {
          // Rellenar tarjetas de crédito
          if (foundBankProducts.cards && foundBankProducts.cards.length > 0) {
            foundBankProducts.cards.forEach(card => {
              const cardItem = document.createElement('div');
              cardItem.classList.add('card-item');
              cardItem.innerHTML = `
                <p><strong>Tipo:</strong> ${card.card}</p>
                <p><strong>Monto:</strong> ${formatCurrency(card.amount)}</p>
                <p><strong>Límite:</strong> ${formatCurrency(card.limit)}</p>
              `;
              creditCardsList.appendChild(cardItem);
            });
          } else {
            creditCardsList.innerHTML = '<p class="no-data-placeholder">No se encontraron tarjetas de crédito para este cliente.</p>';
          }

          // Rellenar créditos contratados
          if (foundBankProducts.credits && foundBankProducts.credits.length > 0) {
            foundBankProducts.credits.forEach(credit => {
              const creditItem = document.createElement('div');
              creditItem.classList.add('credit-item');
              creditItem.innerHTML = `
                <p><strong>Tipo de Crédito:</strong> ${credit.credit}</p>
                <p><strong>Monto:</strong> ${formatCurrency(credit.amount)}</p>
              `;
              creditsList.appendChild(creditItem);
            });
          } else {
            creditsList.innerHTML = '<p class="no-data-placeholder">No se encontraron créditos contratados para este cliente.</p>';
          }
        } else {
            // Si el cliente existe en la base de datos de clientes pero no tiene productos bancarios
            creditCardsList.innerHTML = '<p class="no-data-placeholder">No se encontraron tarjetas de crédito para este cliente.</p>';
            creditsList.innerHTML = '<p class="no-data-placeholder">No se encontraron créditos contratados para este cliente.</p>';
        }

        customerResultsDiv.classList.add('show');

      } catch (error) {
        console.error('Error al obtener datos del cliente:', error);
        customerResultsDiv.classList.remove('show');
        alert('Hubo un error al buscar el cliente. Por favor, inténtalo de nuevo más tarde.');
      }
    };
  });
</script>
</body>
</html>